# コードカバレッジ基準

## 🎯 ねつき式カバレッジルール

### 基本方針
- **品質重視**: カバレッジ100%より意味のあるテストを優先
- **段階的向上**: 現実的な基準から始めて徐々に向上
- **責任に応じた基準**: ファイルの重要度に応じて基準を調整

### 📊 カバレッジ基準詳細

#### 🌟 **Systemsレイヤー（最重要）**
- **Lines**: 95% - システムロジックの完全性確保
- **Functions**: 95% - 公開メソッドほぼ完全カバー
- **Branches**: 90% - 条件分岐の徹底テスト
- **Statements**: 95% - 実行パスの包括確認

#### 🏗️ **Coreレイヤー（重要）**
- **Lines**: 90% - コア機能の確実性
- **Functions**: 90% - 主要メソッドカバー
- **Branches**: 85% - 主要分岐の確認
- **Statements**: 90% - 基本実行パスカバー

#### 🔧 **Utilsレイヤー（ユーティリティ）**
- **Lines**: 95% - 汎用関数の信頼性
- **Functions**: 100% - 全関数テスト必須
- **Branches**: 95% - エッジケース対応
- **Statements**: 95% - 高品質保証

#### 📋 **Constantsレイヤー（定数）**
- **全項目**: 0% - 定数ファイルはテスト対象外

#### 🌐 **全体基準（最低ライン）**
- **Lines**: 90% - プロジェクト全体の健全性
- **Functions**: 90% - 関数レベルの安心感
- **Branches**: 85% - 基本分岐カバー
- **Statements**: 90% - 実行確認

### 🚫 除外対象
- `src/test/**` - テストファイル自体
- `src/main.ts` - エントリーポイント（統合テストで対応）
- `node_modules/**` - 外部依存
- `**/*.d.ts` - 型定義ファイル
- `dist/**` - ビルド成果物

### 📈 運用ルール

#### ✅ **合格条件**
1. 全ての閾値クリア
2. テストが意味のある内容
3. エッジケースの適切な考慮

#### ⚠️ **警告条件**
- カバレッジが基準を5%下回る
- 新しいコードでカバレッジが低下

#### 🚫 **失格条件**
- カバレッジが基準を10%下回る
- 重要なエラーパスが未テスト

### 🎯 目標レベル
- **ゴールド**: 全基準+5%達成
- **プラチナ**: 全基準+10%達成
- **ダイヤモンド**: 全基準+15%達成

### 🔄 見直しタイミング
- 月1回の定期見直し
- 大きなリファクタリング後
- 新機能追加時

---

*ねつき作成 - TypeScript品質管理基準 v1.0*